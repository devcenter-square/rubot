<div class="ui grid">
  <div class="column">
    <div class="ui segment" id="spacer">
      <div class="header">
        <h1 class="blue">Messages</h1><i class="help teal inline circular icon link" data-html="<div class='header'>Messages</div><div class='content'> Messages are content that are sent out at scheduled times. <br><br><strong>You can do things like: </strong> <li>Send a welcome message</li><li>Introduce platforms 5 days after a student joins</li></div>"></i>

        <%= link_to new_message_path, class: "ui labeled teal icon small button right floated " do %>
          <i class="write icon"></i>
          <i>New Message</i>
        <% end %>
      </div>
      <div class="ui divider"></div>

      <table class="ui celled striped table">
        <thead>
          <tr>
            <th>ID</th>
            <th class="six wide">Text</th>
            <th>Summary</th>
            <th>Delay(seconds)</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% sorted_messages = @messages.sort_by(&:message_number) %>

          <% sorted_messages.each do |message| %>
            <tr>
              <td><%= sorted_messages.index(message) + 1 %></td>
              <td><%= message.text %></td>
              <td><%= message.project %></td>
              <td><%= "#{message.delay} (#{message.message_number})" %></td>
              <td>
              <%= link_to 'Details', message, :class => "ui teal basic label"%>
              <%= link_to 'Edit', edit_message_path(message), :class => "ui orange basic label" %>
              <%= link_to 'Delete', message, method: :delete,  :class => "ui red basic label", data: { confirm: "Are you sure you want to delete this message? Consider editing instead." } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
